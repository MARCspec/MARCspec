<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Carsten Klee (ZDB)" />
  <meta name="date" content="2014-01-08" />
  <title>MARCspec as string</title>
   <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
  body { font-family: sans-serif; }
  a { text-decoration: none }
  a:hover { text-decoration: underline }
  h1 { font: 170% sans-serif }
  h1.title { font-size: 200%; font-weight: bold; }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  dt { font-weight: bold; }
  h1, h2, h3, h1 a, h2 a, h3 a { color: #005A9C; }
  table { border-collapse: collapse; }
  td { border: 1px solid #999; padding: 3px }
  dl p { margin-top: 0; }
  dt { margin-top: 0.8em; }
  dd { margin-left: 1.5em; }
  ol { margin-bottom: 1em; }
  table + p { margin-top: 1em; }
  </style>
  <link rel="stylesheet" href="code-box.css" />
</head>
<body>
<a href="https://github.com/cKlee/marc-spec/"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
<header>
<h1 class="title">MARCspec as string</h1>
<h3 class="author">Carsten Klee (ZDB)</h3>
<h4 class="date">2014-01-08 (version 0.3draftrev6)</h4>
</header>

<h1>Table of Contents</h1>
<nav id="TOC">
<ul>
<li><a href="#marcspec-as-string"><span class="toc-section-number">1</span> MARCspec as string</a><ul>
<li><a href="#status-of-this-document"><span class="toc-section-number">1.1</span> Status of this document</a></li>
<li><a href="#terminology"><span class="toc-section-number">1.2</span> Terminology</a></li>
<li><a href="#what-is-a-marcspec"><span class="toc-section-number">1.3</span> What is a MARCspec?</a></li>
<li><a href="#expressing-marcspecs-as-string"><span class="toc-section-number">1.4</span> Expressing MARCspecs as string</a><ul>
<li><a href="#basic-references"><span class="toc-section-number">1.4.1</span> Basic references</a></li>
<li><a href="#form-of-marcspec-as-string"><span class="toc-section-number">1.4.2</span> Form of MARCspec as string</a></li>
</ul></li>
<li><a href="#marcspec-as-string-interpretation"><span class="toc-section-number">1.5</span> MARCspec as string interpretation</a></li>
<li><a href="#definition-of-marc-related-terms-used-in-this-spec"><span class="toc-section-number">1.6</span> Definition of MARC related terms used in this spec</a></li>
<li><a href="#examples"><span class="toc-section-number">1.7</span> Examples</a><ul>
<li><a href="#reference-to-data-in-the-leader-and-control-fields-plus-character-position-and-range"><span class="toc-section-number">1.7.1</span> Reference to data in the leader and control fields plus character position and range</a></li>
<li><a href="#reference-to-data-in-data-fields-or-subfields"><span class="toc-section-number">1.7.2</span> Reference to data in data fields or subfields</a></li>
<li><a href="#reference-to-data-in-subfields-of-data-fields-within-the-context-of-indicators"><span class="toc-section-number">1.7.3</span> Reference to data in subfields of data fields within the context of indicators</a></li>
</ul></li>
<li><a href="#normative-references"><span class="toc-section-number">1.8</span> Normative references</a></li>
<li><a href="#informative-references"><span class="toc-section-number">1.9</span> Informative references</a></li>
<li><a href="#revision-history"><span class="toc-section-number">1.10</span> Revision history</a></li>
</ul></li>
</ul>
</nav>
<section id="marcspec-as-string" class="level1">
<h1><a href="#marcspec-as-string"><span class="header-section-number">1</span> MARCspec as string</a></h1>
<p>Along with the shift to <a href="http://www.w3.org/DesignIssues/LinkedData.html">Linked Data</a> it becomes a common task to map <a href="http://www.loc.gov/marc/">MARC 21</a> data to <a href="http://www.w3.org/TR/rdf-primer/">RDF</a>. Mappings for MARC 21 are normally based on a set of definitions of MARC fields and subfields called *MARC field specification or short <em>MARCspec</em>.</p>
<p>Linked Data is designed to encode the information for exchange in a <a href="http://www.ietf.org/rfc/rfc3986.txt">Uniform Resource Identifier (URI)</a>. Encoding MARCspecs within URIs enables the exchange of MARC mappings on a global level. But the transport of MARCspecs via URIs makes it necessary to encode the spec as a string. This document is a proposal for encoding of MARCspec as string.</p>
<p>There are already implementations of MARC field specifications in tools like <a href="https://github.com/billdueber/marcspec">marcspec</a>, <a href="http://librecat.org/">catmandu</a>, <a href="https://code.google.com/p/solrmarc/">solrmarc</a> and <a href="https://github.com/cKlee/easyM2R">easyM2R</a>. MARCspec can help to build reusable MARCspec parsers and validators.</p>
<section id="status-of-this-document" class="level2">
<a id="Status of this document"></a><h2><a href="#status-of-this-document"><span class="header-section-number">1.1</span> Status of this document</a></h2>
<p>The current version of this proposal is a preliminary draft for open discussion. <a href="https://github.com/cklee/marc-spec/issues">Feedback</a> is welcome!</p>
</section>
<section id="terminology" class="level2">
<a id="Terminology"></a><h2><a href="#terminology"><span class="header-section-number">1.2</span> Terminology</a></h2>
<p>The keywords “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>.</p>
<p>See also <a href="#definition-of-marc-related-terms-used-in-this-spec">Definition of MARC related terms used in this spec</a>.</p>
</section>
<section id="what-is-a-marcspec" class="level2">
<a id="What is a MARCspec?"></a><h2><a href="#what-is-a-marcspec"><span class="header-section-number">1.3</span> What is a MARCspec?</a></h2>
<p>Machine-Readable Cataloguing (MARC) is a document based key-value exchange format for bibliographic data. The data of a MARC record consists of fields, subfields and its contents. There are three kinds of MARC fields: the <em>leader</em>, the <em>control field</em> and <em>data field</em>. The <em>data content</em> in the <em>leader</em> and in the <em>control fields</em> can be accessed through its <em>character position or range</em>. Only <em>data fields</em> are divided into <em>subfields</em>. <em>Subfields</em> can also be contextualized through <em>indicators</em>. There is an <em>indicator 1</em> and an <em>indicator 2</em> for all <em>data fields</em>, both are optional. See <a href="http://www.loc.gov/marc/96principl.html">MARC 21 Principles</a> for a deeper explanation of the MARC 21 format.</p>
<p>A <strong>MARCspec</strong> is a reference to the content data in a MARC record defined through the <em>fields</em>, <em>character positions</em>, <em>subfields</em> and <em>indicators</em>. The <em>data elements</em> of the MARC record being referenced may be represented through a <em>set of data</em>, having zero to n <em>data elements</em>. Neither MARCspec defines the form of this <em>set of data</em>, nor the encoding of the referenced <em>data content</em>.</p>
</section>
<section id="expressing-marcspecs-as-string" class="level2">
<a id="Expressing MARCspecs as string"></a><h2><a href="#expressing-marcspecs-as-string"><span class="header-section-number">1.4</span> Expressing MARCspecs as string</a></h2>
<p>A MARCspec as string might not fulfil all requirements of definition for a reference to the desired set of data like XPath does for XML. This is because of the nearly unlimited number of options accessing data in a MARC record, like through substrings, regular expressions, rules for repeatable fields and subfields. Thus a MARCspec has to concentrate on the basic references and let all other data processing to subsequent data processing functions of tools implemented MARCspec.</p>
<section id="basic-references" class="level3">
<h3><a href="#basic-references"><span class="header-section-number">1.4.1</span> Basic references</a></h3>
<p>A MARCspec as string should cope the following basic references:</p>
<ul>
<li>Reference to <em>data elements</em> in <em>fixed fields</em> by character position and range</li>
<li>Reference to <em>data elements</em> in <em>varibale fields</em> without or within the context of <em>indicators</em></li>
<li>Reference to <em>data content</em> in <em>variable fields</em> by <em>subfield tags</em></li>
<li>Reference to <em>data elements</em> by an <em>field index</em></li>
<li>Reference to <em>data content</em> by an <em>subfield index</em></li>
</ul>
<p>References a MARCspec as string does not cope</p>
<ul>
<li>Reference to substrings of <em>data content</em></li>
<li>Reference to <em>data content</em> wthin the context of other <em>data content</em></li>
<li>Reference to <em>data elements</em> (entries) in the MARC record directory</li>
</ul>
</section>
<section id="form-of-marcspec-as-string" class="level3">
<h3><a href="#form-of-marcspec-as-string"><span class="header-section-number">1.4.2</span> Form of MARCspec as string</a></h3>
<p><strong>This section is normative.</strong></p>
<p>The <strong>Augmented BNF for Syntax Specifications: ABNF</strong> <a href="https://www.ietf.org/rfc/rfc2234.txt">RFC 2234</a> is used to define the form of the MARCspec as string.</p>
<p>A MARCspec as string consists of a <em>field tag</em> optionally followed by a character position or range prefixed with the character “/” or followed by zero to n <em>subfield tags</em> optionally followed by the <em>indicators</em> prefixed with the character “_”.</p>
<pre><code>marcspec = fieldTag ([&quot;/&quot; characterPositionOrRange] / [subfieldTags] [&quot;_&quot; indicators])</code></pre>
<p>A <em>field tag</em> consists of three characters. Within MARC 21 there are only digits allowed (except for the <em>leader</em> which is “LDR”), but using the character “.” instead of a digit this must be interpreted as a wildcard. E.g. <em>2..</em> is then a reference to the <em>data elements</em> in all <em>fields</em> beginning with <em>2</em>.</p>
<pre><code>fieldTag = 3*3(DIGIT / &quot;.&quot;) / &quot;LDR&quot;</code></pre>
<p>A <em>character position or range</em> consists of one to n digits representing the character position optionally followed by one to n digits prefixed with the character “-” representing the character range.</p>
<pre><code>characterPositionOrRange = *DIGIT [&quot;-&quot; *DIGIT]</code></pre>
<p><em>Subfield tags</em> consist of one to n lowercase alphabetic, digits or special characters. In a MARCspec <em>subfield tags</em> may occur in non ordered sequence.</p>
<pre><code>alphalower = %x61-7A   ; a-z
specialCharacter =  %x21-2F / %x3A-3F  ; ! &quot; # $ % &amp; &#39; ( ) * + &#39; - . / : ; &lt; = &gt; ?
subfieldTags = 1*(alphalower / DIGIT / specialCharacter)</code></pre>
<p><em>Indicators</em> consist of <em>indicator 1</em> and <em>indicator 2</em>. Both are optional. If <em>indicator 1</em> is not specified is must be replaced by the character “_”. If <em>indicator 2</em> is not specified it might be replaced by the character “_” or left blank.</p>
<pre><code>indicators = (indicator1 / &quot;_&quot;) [ indicator2 / &quot;_&quot; ]</code></pre>
<p>If present both <em>indicator 1</em> and <em>indicator 2</em> consists of one lowercase alphabetic or numeric character.</p>
<pre><code>indicator  = 1*1(alphalower / DIGIT)
indicator1 = indicator
indicator2 = indicator</code></pre>
</section>
</section>
<section id="marcspec-as-string-interpretation" class="level2">
<a id="MARCspec as string interpretation"></a><h2><a href="#marcspec-as-string-interpretation"><span class="header-section-number">1.5</span> MARCspec as string interpretation</a></h2>
<p><strong>This section is normative.</strong></p>
<p>Because of the limited expressivity of the MARCspec as string there must be some kind of implicit interpretation.</p>
<ul>
<li><p>A MARCspec without <em>subfield tags</em> or <em>character position or range</em> is a reference to the <em>field content</em>.</p></li>
<li><p>For repeatable <em>fields</em> the <em>field tag</em> without an <em>index</em> MUST be interpreted as a reference to the data in all repetitions.</p></li>
<li><p>For repeatable <em>subfields</em> the <em>subfield tag</em> without an <em>index</em> MUST be interpreted as a reference to the data content in all repetitions.</p></li>
<li><p>For the character position or range the digit “0” is always a reference to the first character in the <em>leader</em> or <em>control field</em>.</p></li>
<li><p>Omitted <em>indicators</em> in a MARCspec are interpreted as wildcards for variable field indicators in the MARC record.</p></li>
</ul>
</section>
<section id="definition-of-marc-related-terms-used-in-this-spec" class="level2">
<a id="Definition of MARC related terms used in this spec"></a><h2><a href="#definition-of-marc-related-terms-used-in-this-spec"><span class="header-section-number">1.6</span> Definition of MARC related terms used in this spec</a></h2>
<p>MARCspec does not redefine terms already used by the <a href="http://www.loc.gov/marc/ndmso.html">Network Development and MARC Standards Office</a>. MARCspec lists the definition of core terms taken from the <a href="http://www.loc.gov/marc/specifications/specrecstruc.html">RECORD STRUCTURE</a> document and adds some for clarification purposes.</p>
<p><strong>character position or range</strong></p>
<p>The position or range of positions of characters in <em>control fields</em> and <em>leader</em>. The first charater has always the position <em>0</em>.</p>
<p><strong>content designation</strong></p>
<p>The codes and conventions established explicitly by MARC 21 to identify and further characterize the <em>data elements</em> within a record and to support the manipulation of that data.</p>
<p><strong>content of field</strong></p>
<p>see <em>field content</em></p>
<p><strong>control field</strong></p>
<p>A <em>variable field</em> containing information useful or required for the processing of the record. Control fields are assigned <em>tags</em> beginning with two zeroes. Control fields with fixed length data elements are restricted to ASCII graphics.</p>
<p><strong>data content</strong></p>
<p>see <em>data element value</em></p>
<p><strong>data element</strong></p>
<p>A defined unit of information.</p>
<p><strong>data element identifier</strong></p>
<p>A one-character code used to identify individual <em>data elements</em> within a <em>variable field</em>. The <em>data element</em> may be any ASCII lowercase alphabetic, numeric, or graphic symbol except blank.</p>
<p><strong>data element value</strong></p>
<p>The value of a <em>data element</em> in a <em>data field</em>.</p>
<p><strong>data field</strong></p>
<p>A <em>variable field</em> containing bibliographic or other data. Data fields are assigned <em>tags</em> beginning with characters other than two zeroes. Data fields contain data in any MARC 21 character set unless a field-specific restriction applies.</p>
<p><strong>data in field</strong></p>
<p>see <em>field content</em></p>
<p><strong>delimiter</strong></p>
<p>ASCII control character 1F(hex) (represented graphically in MARC 21 documentation as ASCII control character 1F (hex) or $), which is combined with a <em>data element identifier</em> to make up the <em>subfield code</em> which precedes each individual <em>data element</em> within a variable field. The ASCII name for the delimiter is unit separator (US).</p>
<p><strong>field</strong></p>
<p>A defined character string that may contain one or more <em>data elements</em>.</p>
<p><strong>field content</strong></p>
<p>All <em>data elements</em> in a field without <em>indicators</em>. See also <em>field data</em>.</p>
<p><strong>field data</strong></p>
<p>All <em>data elements</em> in a field including <em>indicators</em>.</p>
<p><strong>field index</strong></p>
<p>see <em>index</em></p>
<p><strong>field tag</strong></p>
<p>see <em>tag</em></p>
<p><strong>fixed field</strong></p>
<p>A <em>field</em> whose length does not vary. The term is occasionally used to refer to <em>variable control fields</em>, especially those that contain coded data such as fields 007 or 008.</p>
<p><strong>index</strong></p>
<p>The count of repeatable <em>fields</em> and <em>subfields</em>. The first <em>field</em> in a list of repeatable <em>fields</em> or the first <em>subfield</em> in a list of repeatable <em>subfields</em> has always the index <em>0</em>.</p>
<p><strong>indicator</strong></p>
<p>A <em>data element</em> associated with a <em>data field</em> that supplies additional information about the field. An indicator may be any ASCII lowercase alphabetic, numeric, or blank. Indicators are not used in <em>control fields</em>.</p>
<p><strong>leader</strong></p>
<p>A <em>fixed field</em> that occurs at the beginning of each record and provides information for the processing of the record.</p>
<p><strong>set of data</strong></p>
<p>A set of <em>data elements</em> referenced by a MARCspec.</p>
<p><strong>subfield</strong></p>
<p>A <em>data element</em> including its <em>subfield code</em>. It’s identified by a <em>data element identifier</em> within a <em>variable field</em>.</p>
<p><strong>subfield code</strong></p>
<p>The two-character combination of a <em>delimiter</em> followed by a <em>data element identifier</em>. Subfield codes are not used in <em>control fields</em>.</p>
<p><strong>subfield index</strong></p>
<p>see <em>index</em></p>
<p><strong>subfield tag</strong></p>
<p>see <em>data element identifier</em></p>
<p><strong>tag</strong></p>
<p>A three character string used to identify or label an associated <em>variable field</em>. The tag may consist of ASCII numeric characters (decimal integers 0-9) and/or ASCII alphabetic characters (uppercase or lowercase, but not both).</p>
<p><strong>variable control field</strong></p>
<p>see <em>control field</em></p>
<p><strong>variable data field</strong></p>
<p>see <em>data field</em></p>
<p><strong>variable field</strong></p>
<p>A <em>field</em> whose length is determined for each occurrence by the length of data comprising that occurrence. There are two types of variable fields <em>control fields</em> and <em>data fields</em>.</p>
</section>
<section id="examples" class="level2">
<a id="Examples"></a><h2><a href="#examples"><span class="header-section-number">1.7</span> Examples</a></h2>
<section id="reference-to-data-in-the-leader-and-control-fields-plus-character-position-and-range" class="level3">
<h3><a href="#reference-to-data-in-the-leader-and-control-fields-plus-character-position-and-range"><span class="header-section-number">1.7.1</span> Reference to data in the leader and control fields plus character position and range</a></h3>
<p>Reference to all data in the <em>leader</em>.</p>
<pre><code>LDR</code></pre>
<p>Reference to data in the <em>leader</em> from character position 0 to character position 4 (5 characters).</p>
<pre><code>LDR/0-4</code></pre>
<p>Reference to data in the <em>leader</em> at character position 6 (1 character).</p>
<pre><code>LDR/6</code></pre>
<p>Reference to data in the control field 007 (see <a href="#interpretation">MARCspec as string interpretation</a> for further explanation) at character position 0 (1 character).</p>
<pre><code>007/0</code></pre>
<p>Reference to all control fields.</p>
<pre><code>00.</code></pre>
</section>
<section id="reference-to-data-in-data-fields-or-subfields" class="level3">
<h3><a href="#reference-to-data-in-data-fields-or-subfields"><span class="header-section-number">1.7.2</span> Reference to data in data fields or subfields</a></h3>
<p>Reference to the <em>field content</em> in the field “245”.</p>
<pre><code>245</code></pre>
<p>Reference to <em>data content</em> in the subfield “a” of field “245”.</p>
<pre><code>245a</code></pre>
<p>Reference to <em>data content</em> in the subfields “a”, “b” and “c” of field “245”.</p>
<pre><code>245abc</code></pre>
<p>Reference to <em>data content</em> in the subfield “a” of all fields beginning with “24”.</p>
<pre><code>24.a</code></pre>
<p>Reference to <em>data content</em> in the subfield “a” of all fields beginning with “2” and ending with “5”.</p>
<pre><code>2.5a</code></pre>
<p>Reference to <em>data content</em> in the subfield “a” of all fields beginning with “2”.</p>
<pre><code>2..a</code></pre>
</section>
<section id="reference-to-data-in-subfields-of-data-fields-within-the-context-of-indicators" class="level3">
<h3><a href="#reference-to-data-in-subfields-of-data-fields-within-the-context-of-indicators"><span class="header-section-number">1.7.3</span> Reference to data in subfields of data fields within the context of indicators</a></h3>
<p>Reference to <em>data content</em> in the subfield “a” within the context of <em>indicator 1</em> with the value <em>1</em>.</p>
<pre><code>245a_1

or

245a_1_</code></pre>
<p>Reference to <em>data content</em> in the subfield “a” within the context of <em>indicator 1</em> with the value <em>1</em> and <em>indicator 2</em> with the value <em>0</em>.</p>
<pre><code>245a_10</code></pre>
<p>Reference to <em>data content</em> in the subfield “a” within the context of <em>indicator 2</em> with the value <em>0</em>.</p>
<pre><code>245a__0</code></pre>
</section>
</section>
<section id="normative-references" class="level2">
<a id="Normative references"></a><h2><a href="#normative-references"><span class="header-section-number">1.8</span> Normative references</a></h2>
<ul>
<li><a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a></li>
<li><a href="https://www.ietf.org/rfc/rfc2234.txt">RFC 2234</a></li>
<li><a href="http://en.wikipedia.org/wiki/ISO_2709">ISO 2709</a></li>
</ul>
</section>
<section id="informative-references" class="level2">
<a id="Informative references"></a><h2><a href="#informative-references"><span class="header-section-number">1.9</span> Informative references</a></h2>
<ul>
<li><a href="http://www.loc.gov/marc/">MARC 21</a></li>
<li><a href="http://www.w3.org/TR/rdf-primer/">RDF</a></li>
<li><a href="http://www.w3.org/DesignIssues/LinkedData.html">Linked Data</a></li>
<li><a href="http://www.ietf.org/rfc/rfc3986.txt">Uniform Resource Identifier (URI)</a></li>
<li><a href="http://www.loc.gov/marc/96principl.html">MARC 21 Principles</a></li>
<li><a href="https://github.com/billdueber/marcspec">marcspec</a></li>
<li><a href="https://code.google.com/p/solrmarc/">solrmarc</a></li>
<li><a href="http://librecat.org/">catmandu</a></li>
</ul>
</section>
<section id="revision-history" class="level2">
<a id="Revision history"></a><h2><a href="#revision-history"><span class="header-section-number">1.10</span> Revision history</a></h2>
<ul>
<li><a href="marc-spec-3136243.html"><code>2014-01-08 14:19:42 +0100</code></a>: <a href="https://github.com/cKlee/marc-spec/commit/313624357c1a036a09cce13905373b75f79e46bf">‘~’ is now ‘/’ and ‘X’ is now ‘.’</a></li>
<li><a href="marc-spec-ed6e07a.html"><code>2014-01-08 11:24:36 +0100</code></a>: <a href="https://github.com/cKlee/marc-spec/commit/ed6e07ae20f3bf87641022926dc0b5ea25bc8d26">data content see data element value</a></li>
<li><a href="marc-spec-6908103.html"><code>2014-01-08 11:16:52 +0100</code></a>: <a href="https://github.com/cKlee/marc-spec/commit/69081033e106f451a09ec61b9d86ab27c96d11cb">redefined data content</a></li>
<li><a href="marc-spec-780973d.html"><code>2014-01-07 18:37:38 +0100</code></a>: <a href="https://github.com/cKlee/marc-spec/commit/780973dc38b2c1c50b000377926e5f869d95925e">minor: link</a></li>
<li><a href="marc-spec-86b2738.html"><code>2014-01-07 18:32:27 +0100</code></a>: <a href="https://github.com/cKlee/marc-spec/commit/86b273898d59d2d8c2dc48b1efdd917654cb5c82">interpretation of omitted indicators</a></li>
</ul>
</section>
</section>
</body>
</html>
